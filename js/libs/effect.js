var _createClass=function(){function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Point=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5;_classCallCheck(this,i);var e=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.radius=t,e.color="rgba("+[255*Math.random()|0,255*Math.random()|0,255*Math.random()|0,Math.random()].join(",")+")",e.prevCrood=null,e}return _inherits(i,F3.Obj),_createClass(i,[{key:"render",value:function(t){t.fillStyle="#fff",t.fillRect(this.croods2D.position.x,this.croods2D.position.y,this.radius*this.croods2D.scale*this.yScale,this.radius*this.croods2D.scale*this.yScale)}}]),i}(),planeFunctions={"sin(sqrt(x^2+z^2))":function(t,e,i){return Math.sin(Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2))-i)},"cos(x)*sin(z)":function(t,e,i){return Math.cos(t/4+i)*Math.sin(e/4+i)*1}},Effect=function(){function s(t,e,i,o){_classCallCheck(this,s);var n=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return n.renderer=t,n.scene=e,n.camera=i,n.cvs=o,n.xOffset=0,n.waveHeight=.4,n.waveWidth=8,n.col=33,n.colPointNum=33,n.flyTime=2e3,n.timePass=0,n.scale=1,n.scaleStep=.01,n.planeFunction=function(){return 0},n.rotate={x:!1,y:!1,z:!1},n.pointGroup=new F3.Obj,n.scene.add(n.pointGroup),n.resize(o.width,o.height),n.init(),n}return _inherits(s,F3.Time),_createClass(s,[{key:"resize",value:function(t,e){this.cvs.width=t,this.cvs.height=e,this.stepWidth=1.8*t/this.col,this.pointGroup.setPosition(this.cvs.width/2,1.2*this.cvs.height,-this.col*this.stepWidth/2),this.pointGroup.setRotation(.1,0,0)}},{key:"init",value:function(){for(var t,e=-(this.col-1)/2;e<=(this.col-1)/2;e++)for(var i=-(this.colPointNum-1)/2;i<=(this.colPointNum-1)/2;i++)t=new Point(10),this.pointGroup.add(t),t.initPos=new F3.Vector3(0,0,0),t.flyDelay=0}},{key:"update",value:function(t){this.timePass+=t,this.xOffset=this.timePass/500;var e=void 0,i=void 0,o=void 0,n=void 0,s=void 0,r=0;for(o=-(this.col-1)/2;o<=(this.col-1)/2;o++)for(s=-(this.colPointNum-1)/2;s<=(this.colPointNum-1)/2;s++)n=this.planeFunction(o,s,this.xOffset),i=((e=this.pointGroup.children[r]).yScale=1)<(i=(this.timePass-e.flyDelay)/this.flyTime)?1:i<0?0:i,e.setPosition(o*this.stepWidth,n*this.stepWidth,s*this.stepWidth),r++;(this.rotate.x||this.rotate.y||this.rotate.z)&&this.pointGroup.setRotation(this.rotate.x?this.pointGroup.rotation.x+.001:0,this.rotate.y?this.pointGroup.rotation.y+.001:0,this.rotate.z?this.pointGroup.rotation.z+.001:0)}},{key:"setFunction",value:function(t){this.planeFunction=t}},{key:"toggleRotate",value:function(t){this.rotate[t]=!this.rotate[t],this.rotate[t]||(this.pointGroup.rotation[t]=0)}},{key:"animate",value:function(){var e=this;this.addTick(function(t){e.update(t),e.renderer.render(e.scene,e.camera)})}}]),s}();function initEffect(t){t.width=1*document.body.clientWidth;var e=t.getContext("2d"),i=new F3.Scene,o=new F3.Camera;o.origin=new F3.Vector3(t.width/2,t.height/3),o.p=1200;var n=new F3.Renderer(e,t),s=new Effect(n,i,o,t);s.animate(),s.setFunction(planeFunctions["sin(sqrt(x^2+z^2))"]),s.toggleRotate("y"),F3.TIME.start()}