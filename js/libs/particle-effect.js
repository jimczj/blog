!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.F3=n():t.F3=n()}(this,function(){return r={},i.m=e=[function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(1);Object.defineProperty(n,"Camera",{enumerable:!0,get:function(){return e.Camera}});var r=i(6);Object.defineProperty(n,"Time",{enumerable:!0,get:function(){return r.Time}}),Object.defineProperty(n,"TIME",{enumerable:!0,get:function(){return r.TIME}});var s=i(2);Object.defineProperty(n,"Vector3",{enumerable:!0,get:function(){return s.Vector3}});var o=i(9);Object.defineProperty(n,"Euler",{enumerable:!0,get:function(){return o.Euler}});var h=i(10);Object.defineProperty(n,"Obj",{enumerable:!0,get:function(){return h.Obj}});var a=i(11);Object.defineProperty(n,"Scene",{enumerable:!0,get:function(){return a.Scene}});var u=i(12);Object.defineProperty(n,"Renderer",{enumerable:!0,get:function(){return u.Renderer}})},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Camera=void 0;var e=function(t,n,i){return n&&r(t.prototype,n),i&&r(t,i),t};function r(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var s=i(2);n.Camera=(e(o,[{key:"getScaleByZ",value:function(t){return t>this.p?1/0:this.p/(-t+this.p)}},{key:"get2DCrood",value:function(t){var n=this.getScaleByZ(t.z),i=t.clone().sub(this.origin),e=void 0;return i.multiplyScalar(n),(e=this.origin.clone().add(i)).z=0,e}}]),o);function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1200,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new s.Vector3;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,o),this.p=t,this.origin=n}},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Vector3=void 0;var e,r,s,o,h,a,u,c,l=i(3),f=i(4),y=i(5);function d(t,n,i){this.x=t||0,this.y=n||0,this.z=i||0}d.prototype={constructor:d,isVector3:!0,set:function(t,n,i){return this.x=t,this.y=n,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this},sub:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyEuler:function(t){return!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===c&&(c=new y.Quaternion),this.applyQuaternion(c.setFromEuler(t))},applyAxisAngle:function(t,n){return void 0===u&&(u=new y.Quaternion),this.applyQuaternion(u.setFromAxisAngle(t,n))},applyMatrix3:function(t){var n=this.x,i=this.y,e=this.z,r=t.elements;return this.x=r[0]*n+r[3]*i+r[6]*e,this.y=r[1]*n+r[4]*i+r[7]*e,this.z=r[2]*n+r[5]*i+r[8]*e,this},applyMatrix4:function(t){var n=this.x,i=this.y,e=this.z,r=t.elements;this.x=r[0]*n+r[4]*i+r[8]*e+r[12],this.y=r[1]*n+r[5]*i+r[9]*e+r[13],this.z=r[2]*n+r[6]*i+r[10]*e+r[14];var s=r[3]*n+r[7]*i+r[11]*e+r[15];return this.divideScalar(s)},applyQuaternion:function(t){var n=this.x,i=this.y,e=this.z,r=t.x,s=t.y,o=t.z,h=t.w,a=h*n+s*e-o*i,u=h*i+o*n-r*e,c=h*e+r*i-s*n,l=-r*n-s*i-o*e;return this.x=a*h+l*-r+u*-o-c*-s,this.y=u*h+l*-s+c*-r-a*-o,this.z=c*h+l*-o+a*-s-u*-r,this},project:function(t){return void 0===a&&(a=new f.Matrix4),a.multiplyMatrices(t.projectionMatrix,a.getInverse(t.matrixWorld)),this.applyMatrix4(a)},unproject:function(t){return void 0===h&&(h=new f.Matrix4),h.multiplyMatrices(t.matrixWorld,h.getInverse(t.projectionMatrix)),this.applyMatrix4(h)},transformDirection:function(t){var n=this.x,i=this.y,e=this.z,r=t.elements;return this.x=r[0]*n+r[4]*i+r[8]*e,this.y=r[1]*n+r[5]*i+r[9]*e,this.z=r[2]*n+r[6]*i+r[10]*e,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this},clampScalar:function(t,n){return void 0===s&&(s=new d,o=new d),s.set(t,t,t),o.set(n,n,n),this.clamp(s,o)},clampLength:function(t,n){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(n,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},lerpVectors:function(t,n,i){return this.subVectors(n,t).multiplyScalar(i).add(t)},cross:function(t,n){if(void 0!==n)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n);var i=this.x,e=this.y,r=this.z;return this.x=e*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-e*t.x,this},crossVectors:function(t,n){var i=t.x,e=t.y,r=t.z,s=n.x,o=n.y,h=n.z;return this.x=e*h-r*o,this.y=r*s-i*h,this.z=i*o-e*s,this},projectOnVector:function(t){var n=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return void 0===r&&(r=new d),r.copy(this).projectOnVector(t),this.sub(r)},reflect:function(t){return void 0===e&&(e=new d),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var n=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(l._Math.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,i=this.y-t.y,e=this.z-t.z;return n*n+i*i+e*e},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var n=Math.sin(t.phi)*t.radius;return this.x=n*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=n*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),e=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=e,this},setFromMatrixColumn:function(t,n){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var i=t;t=n,n=i}return this.fromArray(t.elements,4*n)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t},fromBufferAttribute:function(t,n,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}},n.Vector3=d},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,e,r,s,o={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),s=0,function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?r[t]="-":14===t?r[t]="4":(s<=2&&(s=33554432+16777216*Math.random()|0),i=15&s,s>>=4,r[t]=e[19===t?3&i|8:i]);return r.join("")}),clamp:function(t,n,i){return Math.max(n,Math.min(i,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,i,e,r){return e+(t-n)*(r-e)/(i-n)},lerp:function(t,n,i){return(1-i)*t+i*n},smoothstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*(3-2*t)},smootherstep:function(t,n,i){return t<=n?0:i<=t?1:(t=(t-n)/(i-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*o.DEG2RAD},radToDeg:function(t){return t*o.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};n._Math=o},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Matrix4=void 0;i(3);var c,l,e,r,s,o,h,f=i(2);function y(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}y.prototype={constructor:y,isMatrix4:!0,set:function(t,n,i,e,r,s,o,h,a,u,c,l,f,y,d,m){var p=this.elements;return p[0]=t,p[4]=n,p[8]=i,p[12]=e,p[1]=r,p[5]=s,p[9]=o,p[13]=h,p[2]=a,p[6]=u,p[10]=c,p[14]=l,p[3]=f,p[7]=y,p[11]=d,p[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new y).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var n=this.elements,i=t.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this},extractBasis:function(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this},extractRotation:function(t){void 0===h&&(h=new f.Vector3);var n=this.elements,i=t.elements,e=1/h.setFromMatrixColumn(t,0).length(),r=1/h.setFromMatrixColumn(t,1).length(),s=1/h.setFromMatrixColumn(t,2).length();return n[0]=i[0]*e,n[1]=i[1]*e,n[2]=i[2]*e,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,this},makeRotationFromEuler:function(t){!1===(t&&t.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=this.elements,i=t.x,e=t.y,r=t.z,s=Math.cos(i),o=Math.sin(i),h=Math.cos(e),a=Math.sin(e),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var l=s*u,f=s*c,y=o*u,d=o*c;n[0]=h*u,n[4]=-h*c,n[8]=a,n[1]=f+y*a,n[5]=l-d*a,n[9]=-o*h,n[2]=d-l*a,n[6]=y+f*a,n[10]=s*h}else if("YXZ"===t.order){var m=h*u,p=h*c,_=a*u,x=a*c;n[0]=m+x*o,n[4]=_*o-p,n[8]=s*a,n[1]=s*c,n[5]=s*u,n[9]=-o,n[2]=p*o-_,n[6]=x+m*o,n[10]=s*h}else if("ZXY"===t.order){m=h*u,p=h*c,_=a*u,x=a*c;n[0]=m-x*o,n[4]=-s*c,n[8]=_+p*o,n[1]=p+_*o,n[5]=s*u,n[9]=x-m*o,n[2]=-s*a,n[6]=o,n[10]=s*h}else if("ZYX"===t.order){l=s*u,f=s*c,y=o*u,d=o*c;n[0]=h*u,n[4]=y*a-f,n[8]=l*a+d,n[1]=h*c,n[5]=d*a+l,n[9]=f*a-y,n[2]=-a,n[6]=o*h,n[10]=s*h}else if("YZX"===t.order){var v=s*h,M=s*a,w=o*h,z=o*a;n[0]=h*u,n[4]=z-v*c,n[8]=w*c+M,n[1]=c,n[5]=s*u,n[9]=-o*u,n[2]=-a*u,n[6]=M*c+w,n[10]=v-z*c}else if("XZY"===t.order){v=s*h,M=s*a,w=o*h,z=o*a;n[0]=h*u,n[4]=-c,n[8]=a*u,n[1]=v*c+z,n[5]=s*u,n[9]=M*c-w,n[2]=w*c-M,n[6]=o*u,n[10]=z*c+v}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromQuaternion:function(t){var n=this.elements,i=t.x,e=t.y,r=t.z,s=t.w,o=i+i,h=e+e,a=r+r,u=i*o,c=i*h,l=i*a,f=e*h,y=e*a,d=r*a,m=s*o,p=s*h,_=s*a;return n[0]=1-(f+d),n[4]=c-_,n[8]=l+p,n[1]=c+_,n[5]=1-(u+d),n[9]=y-m,n[2]=l-p,n[6]=y+m,n[10]=1-(u+f),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},lookAt:function(t,n,i){void 0===r&&(r=new f.Vector3,s=new f.Vector3,o=new f.Vector3);var e=this.elements;return o.subVectors(t,n).normalize(),0===o.lengthSq()&&(o.z=1),r.crossVectors(i,o).normalize(),0===r.lengthSq()&&(o.z+=1e-4,r.crossVectors(i,o).normalize()),s.crossVectors(o,r),e[0]=r.x,e[4]=s.x,e[8]=o.x,e[1]=r.y,e[5]=s.y,e[9]=o.y,e[2]=r.z,e[6]=s.z,e[10]=o.z,this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var i=t.elements,e=n.elements,r=this.elements,s=i[0],o=i[4],h=i[8],a=i[12],u=i[1],c=i[5],l=i[9],f=i[13],y=i[2],d=i[6],m=i[10],p=i[14],_=i[3],x=i[7],v=i[11],M=i[15],w=e[0],z=e[4],g=e[8],b=e[12],C=e[1],E=e[5],k=e[9],T=e[13],O=e[2],V=e[6],P=e[10],F=e[14],S=e[3],j=e[7],I=e[11],R=e[15];return r[0]=s*w+o*C+h*O+a*S,r[4]=s*z+o*E+h*V+a*j,r[8]=s*g+o*k+h*P+a*I,r[12]=s*b+o*T+h*F+a*R,r[1]=u*w+c*C+l*O+f*S,r[5]=u*z+c*E+l*V+f*j,r[9]=u*g+c*k+l*P+f*I,r[13]=u*b+c*T+l*F+f*R,r[2]=y*w+d*C+m*O+p*S,r[6]=y*z+d*E+m*V+p*j,r[10]=y*g+d*k+m*P+p*I,r[14]=y*b+d*T+m*F+p*R,r[3]=_*w+x*C+v*O+M*S,r[7]=_*z+x*E+v*V+M*j,r[11]=_*g+x*k+v*P+M*I,r[15]=_*b+x*T+v*F+M*R,this},multiplyToArray:function(t,n,i){var e=this.elements;return this.multiplyMatrices(t,n),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this},applyToBufferAttribute:function(t){void 0===e&&(e=new f.Vector3);for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t},determinant:function(){var t=this.elements,n=t[0],i=t[4],e=t[8],r=t[12],s=t[1],o=t[5],h=t[9],a=t[13],u=t[2],c=t[6],l=t[10],f=t[14];return t[3]*(+r*h*c-e*a*c-r*o*l+i*a*l+e*o*f-i*h*f)+t[7]*(+n*h*f-n*a*l+r*s*l-e*s*f+e*a*u-r*h*u)+t[11]*(+n*a*c-n*o*f-r*s*c+i*s*f+r*o*u-i*a*u)+t[15]*(-e*o*u-n*h*c+n*o*l+e*s*c-i*s*l+i*h*u)},transpose:function(){var t,n=this.elements;return t=n[1],n[1]=n[4],n[4]=t,t=n[2],n[2]=n[8],n[8]=t,t=n[6],n[6]=n[9],n[9]=t,t=n[3],n[3]=n[12],n[12]=t,t=n[7],n[7]=n[13],n[13]=t,t=n[11],n[11]=n[14],n[14]=t,this},setPosition:function(t){var n=this.elements;return n[12]=t.x,n[13]=t.y,n[14]=t.z,this},getInverse:function(t,n){var i=this.elements,e=t.elements,r=e[0],s=e[1],o=e[2],h=e[3],a=e[4],u=e[5],c=e[6],l=e[7],f=e[8],y=e[9],d=e[10],m=e[11],p=e[12],_=e[13],x=e[14],v=e[15],M=y*x*l-_*d*l+_*c*m-u*x*m-y*c*v+u*d*v,w=p*d*l-f*x*l-p*c*m+a*x*m+f*c*v-a*d*v,z=f*_*l-p*y*l+p*u*m-a*_*m-f*u*v+a*y*v,g=p*y*c-f*_*c-p*u*d+a*_*d+f*u*x-a*y*x,b=r*M+s*w+o*z+h*g;if(0==b){var C="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===n)throw new Error(C);return console.warn(C),this.identity()}var E=1/b;return i[0]=M*E,i[1]=(_*d*h-y*x*h-_*o*m+s*x*m+y*o*v-s*d*v)*E,i[2]=(u*x*h-_*c*h+_*o*l-s*x*l-u*o*v+s*c*v)*E,i[3]=(y*c*h-u*d*h-y*o*l+s*d*l+u*o*m-s*c*m)*E,i[4]=w*E,i[5]=(f*x*h-p*d*h+p*o*m-r*x*m-f*o*v+r*d*v)*E,i[6]=(p*c*h-a*x*h-p*o*l+r*x*l+a*o*v-r*c*v)*E,i[7]=(a*d*h-f*c*h+f*o*l-r*d*l-a*o*m+r*c*m)*E,i[8]=z*E,i[9]=(p*y*h-f*_*h-p*s*m+r*_*m+f*s*v-r*y*v)*E,i[10]=(a*_*h-p*u*h+p*s*l-r*_*l-a*s*v+r*u*v)*E,i[11]=(f*u*h-a*y*h-f*s*l+r*y*l+a*s*m-r*u*m)*E,i[12]=g*E,i[13]=(f*_*o-p*y*o+p*s*d-r*_*d-f*s*x+r*y*x)*E,i[14]=(p*u*o-a*_*o-p*s*c+r*_*c+a*s*x-r*u*x)*E,i[15]=(a*y*o-f*u*o+f*s*c-r*y*c-a*s*d+r*u*d)*E,this},scale:function(t){var n=this.elements,i=t.x,e=t.y,r=t.z;return n[0]*=i,n[4]*=e,n[8]*=r,n[1]*=i,n[5]*=e,n[9]*=r,n[2]*=i,n[6]*=e,n[10]*=r,n[3]*=i,n[7]*=e,n[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],e=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,i,e))},makeTranslation:function(t,n,i){return this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var n=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this},makeRotationY:function(t){var n=Math.cos(t),i=Math.sin(t);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this},makeRotationZ:function(t){var n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,n){var i=Math.cos(n),e=Math.sin(n),r=1-i,s=t.x,o=t.y,h=t.z,a=r*s,u=r*o;return this.set(a*s+i,a*o-e*h,a*h+e*o,0,a*o+e*h,u*o+i,u*h-e*s,0,a*h-e*o,u*h+e*s,r*h*h+i,0,0,0,0,1),this},makeScale:function(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,n,i){return this.set(1,n,i,0,t,1,i,0,t,n,1,0,0,0,0,1),this},compose:function(t,n,i){return this.makeRotationFromQuaternion(n),this.scale(i),this.setPosition(t),this},decompose:function(t,n,i){void 0===c&&(c=new f.Vector3,l=new y);var e=this.elements,r=c.set(e[0],e[1],e[2]).length(),s=c.set(e[4],e[5],e[6]).length(),o=c.set(e[8],e[9],e[10]).length();this.determinant()<0&&(r=-r),t.x=e[12],t.y=e[13],t.z=e[14],l.elements.set(this.elements);var h=1/r,a=1/s,u=1/o;return l.elements[0]*=h,l.elements[1]*=h,l.elements[2]*=h,l.elements[4]*=a,l.elements[5]*=a,l.elements[6]*=a,l.elements[8]*=u,l.elements[9]*=u,l.elements[10]*=u,n.setFromRotationMatrix(l),i.x=r,i.y=s,i.z=o,this},makePerspective:function(t,n,i,e,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,h=2*r/(n-t),a=2*r/(i-e),u=(n+t)/(n-t),c=(i+e)/(i-e),l=-(s+r)/(s-r),f=-2*s*r/(s-r);return o[0]=h,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=a,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,n,i,e,r,s){var o=this.elements,h=1/(n-t),a=1/(i-e),u=1/(s-r),c=(n+t)*h,l=(i+e)*a,f=(s+r)*u;return o[0]=2*h,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*a,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var n=this.elements,i=t.elements,e=0;e<16;e++)if(n[e]!==i[e])return!1;return!0},fromArray:function(t,n){void 0===n&&(n=0);for(var i=0;i<16;i++)this.elements[i]=t[i+n];return this},toArray:function(t,n){void 0===t&&(t=[]),void 0===n&&(n=0);var i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}},n.Matrix4=y},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Quaternion=void 0;var e,r,s=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},o=i(2);function h(t,n,i,e){this._x=t||0,this._y=n||0,this._z=i||0,this._w=void 0!==e?e:1}h.prototype={constructor:h,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,n,i,e){return this._x=t,this._y=n,this._z=i,this._w=e,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,n){if(!1===(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),e=Math.cos(t._y/2),r=Math.cos(t._z/2),s=Math.sin(t._x/2),o=Math.sin(t._y/2),h=Math.sin(t._z/2),a=t.order;return"XYZ"===a?(this._x=s*e*r+i*o*h,this._y=i*o*r-s*e*h,this._z=i*e*h+s*o*r,this._w=i*e*r-s*o*h):"YXZ"===a?(this._x=s*e*r+i*o*h,this._y=i*o*r-s*e*h,this._z=i*e*h-s*o*r,this._w=i*e*r+s*o*h):"ZXY"===a?(this._x=s*e*r-i*o*h,this._y=i*o*r+s*e*h,this._z=i*e*h+s*o*r,this._w=i*e*r-s*o*h):"ZYX"===a?(this._x=s*e*r-i*o*h,this._y=i*o*r+s*e*h,this._z=i*e*h-s*o*r,this._w=i*e*r+s*o*h):"YZX"===a?(this._x=s*e*r+i*o*h,this._y=i*o*r+s*e*h,this._z=i*e*h-s*o*r,this._w=i*e*r-s*o*h):"XZY"===a&&(this._x=s*e*r-i*o*h,this._y=i*o*r-s*e*h,this._z=i*e*h+s*o*r,this._w=i*e*r+s*o*h),!1!==n&&this.onChangeCallback(),this},setFromAxisAngle:function(t,n){var i=n/2,e=Math.sin(i);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var n,i=t.elements,e=i[0],r=i[4],s=i[8],o=i[1],h=i[5],a=i[9],u=i[2],c=i[6],l=i[10],f=e+h+l;return 0<f?(n=.5/Math.sqrt(f+1),this._w=.25/n,this._x=(c-a)*n,this._y=(s-u)*n,this._z=(o-r)*n):h<e&&l<e?(n=2*Math.sqrt(1+e-h-l),this._w=(c-a)/n,this._x=.25*n,this._y=(r+o)/n,this._z=(s+u)/n):l<h?(n=2*Math.sqrt(1+h-e-l),this._w=(s-u)/n,this._x=(r+o)/n,this._y=.25*n,this._z=(a+c)/n):(n=2*Math.sqrt(1+l-e-h),this._w=(o-r)/n,this._x=(s+u)/n,this._y=(a+c)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(t,n){return void 0===e&&(e=new o.Vector3),(r=t.dot(n)+1)<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?e.set(-t.y,t.x,0):e.set(0,-t.z,t.y)):e.crossVectors(t,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=r,this.normalize()},inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,n){return void 0!==n?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,n){var i=t._x,e=t._y,r=t._z,s=t._w,o=n._x,h=n._y,a=n._z,u=n._w;return this._x=i*u+s*o+e*a-r*h,this._y=e*u+s*h+r*o-i*a,this._z=r*u+s*a+i*h-e*o,this._w=s*u-i*o-e*h-r*a,this.onChangeCallback(),this},slerp:function(t,n){if(0===n)return this;if(1===n)return this.copy(t);var i=this._x,e=this._y,r=this._z,s=this._w,o=s*t._w+i*t._x+e*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=s,this._x=i,this._y=e,this._z=r,this;var h=Math.sqrt(1-o*o);if(Math.abs(h)<.001)return this._w=.5*(s+this._w),this._x=.5*(i+this._x),this._y=.5*(e+this._y),this._z=.5*(r+this._z),this;var a=Math.atan2(h,o),u=Math.sin((1-n)*a)/h,c=Math.sin(n*a)/h;return this._w=s*u+this._w*c,this._x=i*u+this._x*c,this._y=e*u+this._y*c,this._z=r*u+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this.onChangeCallback(),this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},s(h,{slerp:function(t,n,i,e){return i.copy(t).slerp(n,e)},slerpFlat:function(t,n,i,e,r,s,o){var h=i[e+0],a=i[e+1],u=i[e+2],c=i[e+3],l=r[s+0],f=r[s+1],y=r[s+2],d=r[s+3];if(c!==d||h!==l||a!==f||u!==y){var m=1-o,p=h*l+a*f+u*y+c*d,_=0<=p?1:-1,x=1-p*p;if(x>Number.EPSILON){var v=Math.sqrt(x),M=Math.atan2(v,p*_);m=Math.sin(m*M)/v,o=Math.sin(o*M)/v}var w=o*_;if(h=h*m+l*w,a=a*m+f*w,u=u*m+y*w,c=c*m+d*w,m===1-o){var z=1/Math.sqrt(h*h+a*a+u*u+c*c);h*=z,a*=z,u*=z,c*=z}}t[n]=h,t[n+1]=a,t[n+2]=u,t[n+3]=c}}),n.Quaternion=h},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Time=n.TIME=void 0;var e=function(t,n,i){return n&&r(t.prototype,n),i&&r(t,i),t};function r(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var s,o=i(7),h=(s=o)&&s.__esModule?s:{default:s};var a,u,c,l,f={bodys:[],delta:16},y=!1;f.addBody=function(t){this.bodys.push(t)},f.removeBody=function(t){var n=this.bodys.indexOf(t);-1!==n&&this.bodys.splice(n,1)},f.tick=(c=(new Date).getTime(),l=c,function(){u=500<(u=c-l)?30:u<16?16:u,f.delta=u,l=c,f.handleFrame(u),y||(a=requestAnimationFrame(f.tick))}),f.start=function(){y=!1,cancelAnimationFrame(a),this.tick()},f.stop=function(){cancelAnimationFrame(a),y=!0},f.handleFrame=function(n){f.bodys.forEach(function(t){t.isStop||t.ticks.forEach(function(t){t.fn&&t.fn(n)})}),h.default.update()},window.TIME=f;var d=(e(m,[{key:"destory",value:function(){f.removeBody(this)}},{key:"addTick",value:function(t){var n={fn:t.bind(this),isStop:!1};return this.ticks.push(n),n}},{key:"removeTick",value:function(t){if(t){var n=this.ticks.indexOf(t);-1!==n&&this.ticks.splice(n,1)}else this.ticks=[]}},{key:"addTween",value:function(t){this.tweens.push(t)}},{key:"removeTween",value:function(t){if(t){var n=this.tweens.indexOf(t);-1!==n&&this.tweens.splice(n,1)}else this.tween=[]}},{key:"stop",value:function(){this.isStop=!0,this.tweens.forEach(function(t){t.stop()})}},{key:"start",value:function(){this.isStop=!1,this.tweens.forEach(function(t){t.start()})}}]),m);function m(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,m),this.ticks=[],this.tweens=[],this.isStop=!1,f.addBody(this)}window.Time=d;for(var p=0;p<1e4;p+=100)window["TIME_"+p]="develop"===window.env?0:p;n.TIME=f,n.Time=d},function(t,i,n){var s;(function(n){"use strict";"function"==typeof Symbol&&Symbol.iterator;var e,r,h=h||(e=[],{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t,n){if(0===e.length)return!1;var i=0;for(t=void 0!==t?t:h.now();i<e.length;)e[i].update(t)||n?i++:e.splice(i,1);return!0}});"undefined"==typeof window&&void 0!==n?h.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?h.now=window.performance.now.bind(window.performance):void 0!==Date.now?h.now=Date.now:h.now=function(){return(new Date).getTime()},h.Tween=function(t){var u,c=t,l={},f={},y={},d=1e3,m=0,p=!1,i=!1,_=!1,x=0,v=null,M=h.Easing.Linear.None,w=h.Interpolation.Linear,z=[],g=null,b=!1,C=null,E=null,n=null;this.to=function(t,n){return f=t,void 0!==n&&(d=n),this},this.start=function(t){for(var n in h.add(this),b=!(i=!0),v=void 0!==t?t:h.now(),v+=x,f){if(f[n]instanceof Array){if(0===f[n].length)continue;f[n]=[c[n]].concat(f[n])}void 0!==c[n]&&(l[n]=c[n],l[n]instanceof Array==!1&&(l[n]*=1),y[n]=l[n]||0)}return this},this.stop=function(){return i&&(h.remove(this),i=!1,null!==n&&n.call(c,c),this.stopChainedTweens()),this},this.end=function(){return this.update(v+d),this},this.stopChainedTweens=function(){for(var t=0,n=z.length;t<n;t++)z[t].stop()},this.delay=function(t){return x=t,this},this.repeat=function(t){return m=t,this},this.repeatDelay=function(t){return u=t,this},this.yoyo=function(t){return p=t,this},this.easing=function(t){return M=t,this},this.interpolation=function(t){return w=t,this},this.chain=function(){return z=arguments,this},this.onStart=function(t){return g=t,this},this.onUpdate=function(t){return C=t,this},this.onComplete=function(t){return E=t,this},this.onStop=function(t){return n=t,this},this.update=function(t){var n,i,e;if(t<v)return!0;for(n in!1===b&&(null!==g&&g.call(c,c),b=!0),e=M(i=1<(i=(t-v)/d)?1:i),f)if(void 0!==l[n]){var r=l[n]||0,s=f[n];s instanceof Array?c[n]=w(s,e):("string"==typeof s&&(s="+"===s.charAt(0)||"-"===s.charAt(0)?r+parseFloat(s):parseFloat(s)),"number"==typeof s&&(c[n]=r+(s-r)*e))}if(null!==C&&C.call(c,e),1!==i)return!0;if(0<m){for(n in isFinite(m)&&m--,y){if("string"==typeof f[n]&&(y[n]=y[n]+parseFloat(f[n])),p){var o=y[n];y[n]=f[n],f[n]=o}l[n]=y[n]}return p&&(_=!_),v=void 0!==u?t+u:t+x,!0}null!==E&&E.call(c,c);for(var h=0,a=z.length;h<a;h++)z[h].start(v+d);return!1}},h.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?t*t*((1+n)*t-n)*.5:.5*((t-=2)*t*((1+n)*t+n)+2)}},Bounce:{In:function(t){return 1-h.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*h.Easing.Bounce.In(2*t):.5*h.Easing.Bounce.Out(2*t-1)+.5}}},h.Interpolation={Linear:function(t,n){var i=t.length-1,e=i*n,r=Math.floor(e),s=h.Interpolation.Utils.Linear;return n<0?s(t[0],t[1],e):1<n?s(t[i],t[i-1],i-e):s(t[r],t[i<r+1?i:r+1],e-r)},Bezier:function(t,n){for(var i=0,e=t.length-1,r=Math.pow,s=h.Interpolation.Utils.Bernstein,o=0;o<=e;o++)i+=r(1-n,e-o)*r(n,o)*t[o]*s(e,o);return i},CatmullRom:function(t,n){var i=t.length-1,e=i*n,r=Math.floor(e),s=h.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(n<0&&(r=Math.floor(e=i*(1+n))),s(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],e-r)):n<0?t[0]-(s(t[0],t[0],t[1],t[1],-e)-t[0]):1<n?t[i]-(s(t[i],t[i],t[i-1],t[i-1],e-i)-t[i]):s(t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2],e-r)},Utils:{Linear:function(t,n,i){return(n-t)*i+t},Bernstein:function(t,n){var i=h.Interpolation.Utils.Factorial;return i(t)/i(n)/i(t-n)},Factorial:(r=[1],function(t){var n=1;if(r[t])return r[t];for(var i=t;1<i;i--)n*=i;return r[t]=n}),CatmullRom:function(t,n,i,e,r){var s=.5*(i-t),o=.5*(e-n),h=r*r;return(2*n-2*i+s+o)*(r*h)+(-3*n+3*i-2*s-o)*h+s*r+n}}},void 0===(s=function(){return h}.apply(i,[]))||(t.exports=s)}).call(i,n(8))},function(t,n){"use strict";var i,e,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function h(n){if(i===setTimeout)return setTimeout(n,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(n,0);try{return i(n,0)}catch(t){try{return i.call(null,n,0)}catch(t){return i.call(this,n,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var a,u=[],c=!1,l=-1;function f(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&y())}function y(){if(!c){var t=h(f);c=!0;for(var n=u.length;n;){for(a=u,u=[];++l<n;)a&&a[l].run();l=-1,n=u.length}a=null,c=!1,function(n){if(e===clearTimeout)return clearTimeout(n);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(n);try{e(n)}catch(t){try{return e.call(null,n)}catch(t){return e.call(this,n)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function m(){}r.nextTick=function(t){var n=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];u.push(new d(t,n)),1!==u.length||c||h(y)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Euler=void 0;var e,r,s=i(5),o=i(2),h=i(4),d=i(3);function a(t,n,i,e){this._x=t||0,this._y=n||0,this._z=i||0,this._order=e||a.DefaultOrder}a.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],a.DefaultOrder="XYZ",a.prototype={constructor:a,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,n,i,e){return this._x=t,this._y=n,this._z=i,this._order=e||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,n,i){var e=d._Math.clamp,r=t.elements,s=r[0],o=r[4],h=r[8],a=r[1],u=r[5],c=r[9],l=r[2],f=r[6],y=r[10];return"XYZ"===(n=n||this._order)?(this._y=Math.asin(e(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===n?(this._x=Math.asin(-e(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(h,y),this._z=Math.atan2(a,u)):(this._y=Math.atan2(-l,s),this._z=0)):"ZXY"===n?(this._x=Math.asin(e(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-l,y),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(a,s))):"ZYX"===n?(this._y=Math.asin(-e(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(f,y),this._z=Math.atan2(a,s)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===n?(this._z=Math.asin(e(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,s)):(this._x=0,this._y=Math.atan2(h,y))):"XZY"===n?(this._z=Math.asin(-e(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,u),this._y=Math.atan2(h,s)):(this._x=Math.atan2(-c,y),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+n),this._order=n,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(t,n,i){return void 0===r&&(r=new h.Matrix4),r.makeRotationFromQuaternion(t),this.setFromRotationMatrix(r,n,i)},setFromVector3:function(t,n){return this.set(t.x,t.y,t.z,n||this._order)},reorder:(e=new s.Quaternion,function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},n.Euler=a},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Obj=void 0;var e=function(t,n,i){return n&&r(t.prototype,n),i&&r(t,i),t};function r(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var s=i(2),o=i(9);n.Obj=(e(h,[{key:"setPosition",value:function(t,n,i){this.position.set(t,n,i),this.onChange()}},{key:"setRotation",value:function(t,n,i){this.rotation.set(t,n,i,"XYZ"),this.onChange()}},{key:"setScale",value:function(t,n,i){this.scale.set(t,n,i),this.onChange()}},{key:"setWorldPosition",value:function(){this.worldPosition.copy(this.position),this.parent&&this.worldPosition.multiply(this.parent.scale).applyEuler(this.parent.rotation).add(this.parent.worldPosition),this.updateVertice(),this.children.forEach(function(t){t.setWorldPosition()})}},{key:"updateVertice",value:function(){var i=this;this.vertices.forEach(function(t,n){i.worldVertices[n]||(i.worldVertices[n]=i.worldPosition.clone()),i.worldVertices[n].copy(i.worldPosition).multiply(i.scale).applyEuler(i.rotation).add(t)})}},{key:"calc2DCrood",value:function(n){this.croods2D.scale=n.getScaleByZ(this.worldPosition.z),this.croods2D.position=n.get2DCrood(this.worldPosition),this.croods2D.vertices=this.worldVertices.map(function(t){return n.get2DCrood(t)}),this.children.forEach(function(t){t.calc2DCrood(n)})}},{key:"add",value:function(t){-1===(t.parent=this).children.indexOf(t)&&(this.children.push(t),t.setWorldPosition())}},{key:"remove",value:function(t){delete t.parent,this.children=this.children.filter(function(t){return t!==obj})}},{key:"onChange",value:function(){this.setWorldPosition()}},{key:"_render",value:function(n,i){n.save(),this.render(n,i),n.restore(),this.children.forEach(function(t){t._render(n,i)})}},{key:"render",value:function(t,n){}}]),h);function h(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,h),this.parent=null,this.children=[],this.worldPosition=new s.Vector3,this.position=new s.Vector3,this.scale=new s.Vector3(1,1,1),this.rotation=new o.Euler,this.vertices=[],this.worldVertices=[],this.willUpdate=!1,this.croods2D={scale:1,position:new s.Vector3,vertices:[]}}},function(t,n){"use strict";function e(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(r,[{key:"add",value:function(t){this.objs.push(t)}},{key:"remove",value:function(n){this.objs=this.objs.filter(function(t){return t!==n})}}]),r);function r(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.objs=[]}n.Scene=i},function(t,n){"use strict";function e(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(r,[{key:"render",value:function(t,n){var i=this;this.beforeRender(),t.objs.forEach(function(t){t.calc2DCrood(n),t._render(i.ctx,i.cvs)}),this.afterRender()}},{key:"beforeRender",value:function(){this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height)}},{key:"afterRender",value:function(){}}]),r);function r(t,n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.ctx=t,this.cvs=n}n.Renderer=i}],i.c=r,i.p="",i(0);function i(t){if(r[t])return r[t].exports;var n=r[t]={exports:{},id:t,loaded:!1};return e[t].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e,r});